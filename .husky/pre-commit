# Check if jsr.json and package.json versions match
JSR_VERSION=$(grep '"version"' jsr.json | head -1 | sed 's/.*"version": "\(.*\)".*/\1/')
PKG_VERSION=$(grep '"version"' package.json | head -1 | sed 's/.*"version": "\(.*\)".*/\1/')

if [ "$JSR_VERSION" != "$PKG_VERSION" ]; then
  echo ""
  echo "❌ Version mismatch detected!"
  echo "   jsr.json:     $JSR_VERSION"
  echo "   package.json: $PKG_VERSION"
  echo ""
  echo "Please bump the version using one of:"
  echo "   npm run bump:major  (for breaking changes)"
  echo "   npm run bump:minor  (for new features)"
  echo "   npm run bump:patch  (for bug fixes)"
  echo ""
  exit 1
fi

echo "✓ Version check passed ($JSR_VERSION)"
